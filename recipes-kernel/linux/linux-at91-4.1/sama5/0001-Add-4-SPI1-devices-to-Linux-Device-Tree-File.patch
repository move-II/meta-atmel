From 5b7952211d801a7cdd6606e80acbfe490e05ae98 Mon Sep 17 00:00:00 2001
From: Jonas Sticha <jonas.sticha@tum.de>
Date: Mon, 18 Apr 2016 16:59:35 +0200
Subject: [PATCH] Add 4 SPI1 devices to Linux Device Tree File

---
 .../arm/boot/dts/at91-sama5d2_xplained_common.dtsi | 41 ++++++++++++++++++++++
 1 file changed, 41 insertions(+)

diff --git a/arch/arm/boot/dts/at91-sama5d2_xplained_common.dtsi b/arch/arm/boot/dts/at91-sama5d2_xplained_common.dtsi
index 3dd0349..d7cd8a4 100644
--- a/arch/arm/boot/dts/at91-sama5d2_xplained_common.dtsi
+++ b/arch/arm/boot/dts/at91-sama5d2_xplained_common.dtsi
@@ -186,6 +186,36 @@
 				};
 			};
 
+			spi1: spi@fc000000 {
+				pinctrl-names = "default";
+				pinctrl-0 = <&pinctrl_spi1_default>;
+				status = "okay";
+
+				device0@0 {
+					compatible = "spidev";
+					reg = <0>;
+					spi-max-frequency = <50000000>;
+				};
+
+				device1@1 {
+					compatible = "spidev";
+					reg = <1>;
+					spi-max-frequency = <50000000>;
+				};
+
+				device2@2 {
+					compatible = "spidev";
+					reg = <2>;
+					spi-max-frequency = <50000000>;
+				};
+
+				device3@3 {
+					compatible = "spidev";
+					reg = <3>;
+					spi-max-frequency = <50000000>;
+				};
+			};
+
 			macb0: ethernet@f8008000 {
 				pinctrl-names = "default";
 				pinctrl-0 = <&pinctrl_macb0_rmii &pinctrl_macb0_phy_irq>;
@@ -671,6 +701,17 @@
 					bias-disable;
 				};
 
+				pinctrl_spi1_default: spi1_default {
+					pinmux = <PIN_PC1__SPI1_SPCK>,
+						 <PIN_PC2__SPI1_MOSI>,
+						 <PIN_PC3__SPI1_MISO>,
+						 <PIN_PC4__SPI1_NPCS0>,
+						 <PIN_PC5__SPI1_NPCS1>,
+						 <PIN_PC6__SPI1_NPCS2>,
+						 <PIN_PC7__SPI1_NPCS3>;
+					bias-disable;
+				};
+
 				pinctrl_uart1_default: uart1_default {
 					pinmux = <PIN_PD2__URXD1>,
 						 <PIN_PD3__UTXD1>;
-- 
2.5.0

